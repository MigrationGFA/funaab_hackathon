<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Team Registration Form</title>
  <link rel="stylesheet" href="participant.css">
</head>
<body>

  <section class="form-section">
    <div class="form-wrapper">

      <!-- Left Image Area -->
      <div class="form-image">
        <img src="images/sponsors/participant.jpg" alt="Team collaboration">
      </div>

      <!-- Right Form Area -->
      <div class="form-container">
        <h2>Team Registration Form</h2>

        <form action="#" method="post" id="startUpForm">
          <div class="form-group">
            <label for="contact-name">Team Contact Person Name</label>
            <input type="text" id="contact-name" name="Team_ContactPerson" placeholder="Enter full name" required>
          </div>

          <div class="form-group">
            <label for="contact-email">Team Contact Email Address</label>
            <input type="email" id="contact-email" name="Team_ContactEmail" placeholder="Enter email address" required>
          </div>

          <div class="form-group">
            <label for="phone-number">Team Contact Phone Number</label>
            <input type="tel" id="phone-number" name="Phone_number" placeholder="Enter phone number" required>
          </div>

          <div class="form-group">
            <label for="department">Team Contact Department</label>
            <input type="text" id="department" name="Team-ContactDepartmant" placeholder="Enter department" required>
          </div>

          <div class="form-group">
            <label for="matric-no">Team ContactMatric Number</label>
            <input type="text" id="matric-no" name="Team_matricNo" placeholder="Enter matric number" required>
          </div>

          <div class="form-group">
            <label for="level">Team Contact Level</label>
            <input type="text" id="level" name="Team_ContactLevel" placeholder="Enter level (e.g., 400L)" required>
          </div>

          <div class="form-group">
            <label for="team-name">Team Name</label>
            <input type="text" id="team-name" name="Team_name" placeholder="Enter team name" required>
          </div>

          <div class="form-group">
            <label for="team-email">Team Email Address</label>
            <input type="email" id="team-email" name="Team_Email" placeholder="Enter team email" required>
          </div>

          <div class="form-group">
            <label for="team-website">Team Website or Social Media</label>
            <input type="url" id="team-website" name="Team_website" placeholder="Enter link (optional)">
          </div>

          <div class="form-group">
            <label for="stage">Idea Stage</label>
            <select id="stage" name="Project_state" required>
              <option value="">-- Select your stage --</option>
              <option value="idea">Idea Stage</option>
              <option value="seed">Seed Stage (0-1 yr)</option>
              <option value="startup">Startup Stage (1-2 yrs)</option>
              <option value="growth">Growth Stage (2-5 yrs)</option>
              <option value="expansion">Expansion Stage (5-10 yrs)</option>
              <option value="maturity">Maturity Stage (10+ yrs)</option>
            </select>
          </div>

          <div class="form-group">
            <label for="year-started">If post seed stage, type the year it started</label>
            <input type="number" id="year-started" name="Team_year" placeholder="e.g., 2022">
          </div>

          <div class="form-group">
            <label for="problem">In 2-3 sentences, what problem are you solving?</label>
            <textarea id="problem" name="Team-problem" rows="3" placeholder="Type your response here..." required></textarea>
          </div>

          <div class="form-group">
            <label for="needs">In 2-3 sentences, what do you think your idea needs to thrive?</label>
            <textarea id="needs" name="Team_needs" rows="3" placeholder="Type your response here..." required></textarea>
          </div>

          <div class="form-group">
            <label for="team-members">In 3-5 sentences, list your team members and describe their roles.</label>
            <textarea id="team-members" name="Team_members" rows="4" placeholder="Type your response here..." required></textarea>
          </div>

          <button type="submit" class="submit-btn displayAction">Submit</button>
        </form>
      </div>

    </div>
  </section>


  <script src="js/popper.min.js"></script>
  <script src="js/jquery.js"></script>
  <script src="js/jquery.magnific-popup.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <script>
      $(document).ready(function () {
    //Clicked Action 

$('#startUpForm').on('submit', function (e) {
  e.preventDefault();

  const form = $(this);
  const formData = new FormData(this);
  const submitBtn = form.find('.displayAction');
  submitBtn.prop('disabled', true).text('Submitting...');

  $.ajax({
    type: 'POST',
    url: 'backend/participant.php',
    data: formData,
    processData: false,
    contentType: false,
    success: function (res) {
      try {
        const response = JSON.parse(res);
        if (response.success) {
          Swal.fire({
            icon: 'success',
            title: 'Success!',
            text: response.message,
            confirmButtonColor: '#198754',
          });
          form[0].reset();
        } else {
          Swal.fire({
            icon: 'error',
            title: 'Error',
            text: response.message || 'An unknown error occurred.',
            confirmButtonColor: '#dc3545',
          });
        }
      } catch (err) {
        console.error(err);
        Swal.fire({
          icon: 'error',
          title: 'Parse Error',
          text: 'Could not parse server response.',
        });
      }
    },
    error: function (xhr, status, error) {
      console.error(error);
      Swal.fire({
        icon: 'error',
        title: 'Request Failed',
        text: 'Something went wrong. Please try again.',
      });
    },
    complete: function () {
      submitBtn.prop('disabled', false).text('Submit');
    }
  });
});
});
  </script>
</body>
</html>
