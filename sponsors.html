<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sponsor Registration Form</title>
  <link rel="stylesheet" href="sponsors.css">
</head>
<body>

  <section class="form-section">
    <div class="form-wrapper">

      <!-- Left Image Section -->
      <div class="form-image">
        <img src="images/sponsors/sponsorss.jpg" alt="Sponsorship">
      </div>

      <!-- Right Form Section -->
      <div class="form-container">

        <h2>Sponsor Registration Form</h2>

        <form id="sponsorForm" action="#" method="post" enctype="multipart/form-data">

          <div class="form-group">
            <label for="sponsor-name">Sponsor Name</label>
            <input type="text" id="sponsor-name" name="Sponsors_name" placeholder="Enter full name" required>
          </div>

          <div class="form-group">
            <label for="sponsor-email">Email Address</label>
            <input type="email" id="sponsor-email" name="Sponsors_Emailaddress" placeholder="Enter email address" required>
          </div>

          <div class="form-group">
            <label for="sponsor-phone">Phone Number</label>
            <input type="tel" id="sponsor-phone" name="Phone_number" placeholder="Enter phone number" required>
          </div>

          <div class="form-group">
            <label for="brand-name">Name of Brand / Company</label>
            <input type="text" id="brand-name" name="Company_name" placeholder="Enter company name" required>
          </div>
<!-- 
          <div class="form-group">
            <label for="logo-upload">Upload Your Logo <span class="optional">(Optional)</span></label>
            <input type="file" id="logo-upload" name="logo_upload" accept="image/*">
          </div> -->

          <div class="form-group">
            <div class="sponsorship-label">
              <label for="sponsorship-type">Sponsorship Type</label>
              <a href="#" class="learn-more" target="_blank">Learn More</a>
            </div>
            <select id="sponsorship-type" name="Sponsor_type" required>
              <option value="">-- Select Sponsorship Type --</option>
              <option value="bronze">Bronze (₦500,000+)</option>
              <option value="silver">Silver (₦1 Million+)</option>
              <option value="gold">Gold (₦3 Million+)</option>
              <option value="platinum">Platinum (₦5 Million+)</option>
            </select>
          </div>

          <button type="submit" class="submit-btn displayAction">Submit</button>

        </form>
      </div>
    </div>
  </section>

  
  <script src="js/popper.min.js"></script>
  <script src="js/jquery.js"></script>
  <script src="js/jquery.magnific-popup.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script>
    $(document).ready(function () {

      $('#sponsorForm').on('submit', function (e) {
        e.preventDefault();

        const form = this;
        const formData = new FormData(form);
        const submitBtn = $(form).find('.displayAction');

        // Disable button & show loading spinner
        submitBtn.prop('disabled', true).html('<i class="fa fa-spinner fa-spin"></i> Submitting...');

        $.ajax({
          type: 'POST',
          url: 'backend/sponsor.php',
          data: formData,
          processData: false,
          contentType: false,

          success: function (res) {
            let response;

            try {
              response = JSON.parse(res);
            } catch (error) {
              console.error('Response parse error:', res);
              Swal.fire({
                icon: 'error',
                title: 'Parse Error',
                text: 'Unable to read server response. Please try again later.',
              });
              return;
            }

            if (response.success) {
              Swal.fire({
                icon: 'success',
                title: 'Success!',
                text: response.message,
                confirmButtonColor: '#198754',
              });
              form.reset();
            } else {
              Swal.fire({
                icon: 'error',
                title: 'Error',
                text: response.message || 'Something went wrong. Please check your input.',
                confirmButtonColor: '#dc3545',
              });
            }
          },

          error: function (xhr, status, error) {
            console.error('AJAX Error:', error);
            Swal.fire({
              icon: 'error',
              title: 'Request Failed',
              text: 'Network or server error. Please try again later.',
            });
          },

          complete: function () {
            // Restore button state
            submitBtn.prop('disabled', false).html('Submit');
          }
        });
      });

    });
  </script>

</body>
</html>
